<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.startup">
      <startup
            class="org.yamcs.studio.core.pvmanager.Bootstrap"/>
   </extension>
   
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            class="org.yamcs.studio.core.ui.prefs.YamcsPreferencePage"
            id="org.yamcs.studio.core.ui.prefs.YamcsPreferencePage"
            name="Yamcs">
      </page>
   </extension>
   
   
   <extension
         point="org.eclipse.ui.commands">
      <category
            id="org.csstudio"
            name="CSS">
      </category>
      <command
            categoryId="org.csstudio"
            id="org.yamcs.studio.core.commanding.issueTelecommandCommand"
            name="Issue Command">
      </command>
   </extension>
   
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="org.yamcs.studio.core.commanding.IssueCommandHandler"
            commandId="org.yamcs.studio.core.commanding.issueTelecommandCommand">
      </handler>
   </extension>
   
   <extension
         point="org.eclipse.ui.views">
      <category
      		name="CSS"
      		id="org.csstudio">
      </category>
      <view
            category="org.csstudio"
            class="org.yamcs.studio.core.commanding.TelecommandView"
            icon="icons/tc.png"
            id="org.yamcs.studio.core.commanding.TelecommandView"
            name="Telecommanding">
      </view>
   </extension>
   <!-- Indicate that the tc view should by default be on the bottom -->
   <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension targetID="org.csstudio.utility.product.CSStudioPerspective">
         <view
               relative="org.eclipse.ui.views.ProgressView"
               relationship="stack"
               visible="true"
               id="org.yamcs.studio.core.commanding.TelecommandView">
         </view>
      </perspectiveExtension>
   </extension>
   
   <extension
         point="org.eclipse.ui.menus">
      <!-- Indicate that the tc view should be in the menu -->
      <menuContribution
            allPopups="false"
            locationURI="menu:css?before=display">
         <command
               commandId="org.eclipse.ui.views.showView"
               icon="icons/tc.png"
               label="Telecommanding"
               style="push"
               tooltip="Open commanding view">
            <parameter
                  name="org.eclipse.ui.views.showView.viewId"
                  value="org.yamcs.studio.core.commanding.TelecommandView">
            </parameter>
         </command>
         <separator
               name="org.yamcs.studio.menu.separator"
               visible="true">
         </separator>
      </menuContribution>
      
      <!-- Augment the main toolbar -->
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
         <toolbar
               id="org.yamcs.studio.toolbar">
             <command
                   commandId="org.yamcs.studio.core.commanding.issueTelecommandCommand"
                   icon="icons/tc_add.png"
                   id="org.yamcs.studio.toolbar.issueTelecommandCommand"
                   tooltip="Issue telecommand">
             </command>
         </toolbar>
      </menuContribution>
   </extension>
   
   <!-- 
   		vtype.pv datasource (for pvtable)
   		(only para:// at this moment, sw:// is pending)
    -->
   <extension point="org.csstudio.vtype.pv.pvfactory">
      <PVFactory name="Yamcs" class="org.yamcs.studio.core.vtype.pv.Para_PVFactory"/>
   </extension>
   
   <!--
   		pvmanager datasource
   	-->
   <extension
         point="org.csstudio.utility.pvmanager.datasource">
      <datasource
            datasource="org.yamcs.studio.core.pvmanager.ParameterDataSource"
            name="Yamcs Parameter"
            prefix="para">
      </datasource>
   </extension>
   <extension
         point="org.csstudio.utility.pvmanager.datasource">
      <datasource
            datasource="org.yamcs.studio.core.pvmanager.SoftwareParameterDataSource"
            name="Yamcs Software Parameter"
            prefix="sw">
      </datasource>
   </extension>
</plugin>
